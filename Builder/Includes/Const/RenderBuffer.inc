
                ifndef _CONST_RENDER_BUFFER_
                define _CONST_RENDER_BUFFER_
RenderBuffer    EQU #BE00                                                       ; адрес буфера обновлений   [64] заняты буфером выбора и WayPoint'ами
RenderBufSize   EQU 192                                                         ; размер рендер буфера
RenderBufPage   EQU PAGE_2                                                      ; страница

; структура данных рендер буфера
;
;      7    6    5    4    3    2    1    0
;   +----+----+----+----+----+----+----+----+
;   | V  | A2 | A1 | A0 | .. | 0  | Q1 | Q0 |
;   +----+----+----+----+----+----+----+----+
;
;   V     - [7]     - флаг необхимости обновления тайла
;   A2-A0 - [6..4]  - номер спрайта для анимации тайла
;   Q1,Q0   [1,0]   - флаг, очереди обновления экрана.
;                     ВАЖНО: при “смене экрана” бит Q1 перемещается в Q0, с обнулением Q1 (0 >> Q1 >> Q0 >> x)
;                            бит “обновления тайла” V всегда сигнализирует о необходимости рендера тайла (V = Q1 | Q0),
;                            он должен обновится в 2х экранах выставляя бит Q1 в единицу
;
RENDER_TILE_BIT EQU 0x07                                                        ; флаг необхимости обновления тайла (0 - необновлять, 1 - необходимо обновить)
RENDER_INC_BIT  EQU 0x04                                                        ; константное значение инкремента анимации тайла
FIRST_QUEUE_BIT EQU 0x01                                                        ; бит первого в очереди, т.е. сигнал полного цикла обновления тайла
RENDER_TILE     EQU 1 << RENDER_TILE_BIT
RENDER_INC      EQU 1 << RENDER_INC_BIT
RESET_QUEUE     EQU 1 << FIRST_QUEUE_BIT                                        ; сброс очереди, т.е. полный цикл отрисовки тайла
TILE_ANIM_MASK  EQU %01110000                                                   ; маска номера анимации тайла

                endif ; ~_CONST_RENDER_BUFFER_
